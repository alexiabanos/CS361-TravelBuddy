<!-- ADD MENU PAGE -->

<!-- QUERY PARAMETERS -->
<script>
  function getQueryString() {
    var result = {}, queryString = location.search.slice(1),
        re = /([^&=]+)=([^&]*)/g, m;

    while (m = re.exec(queryString)) {
      result[decodeURIComponent(m[1])] = decodeURIComponent(m[2].replace(/\+/g, ' '));
    }
    return result;
  }
    const destination = getQueryString()["destination"];
  

  // IMAGE MICROSERVICE
  var url = "http://flip3.engr.oregonstate.edu:12789/images/"+destination+"travel+destination/3";

  const xhr = new XMLHttpRequest();
  xhr.open("GET", url);
  xhr.onload = function(data, status) {
    const response = JSON.parse(xhr.response);
    console.log(response);
    if (xhr.status === 200) {
      hotelImage.src = response.imagePath0;
      flightImage.src = response.imagePath1;
      eventImage.src = response.imagePath2;
    } else {
      console.log("Image Not Found.")
    }
  }
  xhr.onerror = function(err) { 
    console.log("Network Error", err);
  };
  xhr.send();
</script>

<!-- START MENU -->
<div style="margin-top:100px; margin-bottom: 100px;">
  <div class="container"> 

    <div style="margin-top:100px; margin-bottom: 100px;">
      <div class="container p-5">
        
        <!-- START MENU BUTTON -->
        <a onclick="window.location='/startMenu'+window.location.search;">
        <button class="btn btn-outline-secondary mb-5" type="submit" align=left> x </button>
        </a>
        
        <!-- DESTINATION NAME -->
        <h1>Plan your trip to <span id='destinationName'></span></h2>
        <script>
          if (typeof destination === "undefined" || null){
            document.getElementById("destinationName").innerHTML = "a new place";
          } else{
           document.getElementById("destinationName").innerHTML = destination; 
          }
        </script>

        <!-- MENU OPTIONS -->
        <div class="card-deck mt-5">
          <div class="card" style="width: 18rem;">
            <img id="hotelImage" class="card-img-top" style="height: 13rem;">
            <div class="card-block">
              <div class="card-body">

                <!-- ADD HOTELS -->
                <h5 class="card-title">Where to stay?</h5>
                <p class="card-text" align="left">Add hotel and accomodation details to keep track of where you're staying.</p>
                <a onclick="window.location='/addHotels'+window.location.search;"> 
                <button class="btn btn-outline-primary btn-lg btn-block" type="button">Add Hotels +</button>
                </a>
              </div>
            </div>
          </div>

          <!-- ADD FLIGHTS -->
          <div class="card" style="width: 18rem;">
            <img id="flightImage" class="card-img-top" style="height: 13rem;">
              <div class="card-block">
                <div class="card-body">
                  <h5 class="card-title">How to get there?</h5>
                  <p class="card-text" align="left">Add flight information to keep track of how to get where you're going.</p>
                  <a onclick="window.location='/addFlights'+window.location.search;"> 
                  <button class="btn btn-outline-primary btn-lg btn-block" type="button">Add Flights +</button>
                  </a>
                </div>
              </div>
            </div>

          <!-- ADD EVENTS -->
          <div class="card" style="width: 18rem;">
            <img id="eventImage" class="card-img-top" style="height: 13rem;">
            <div class="card-block">
              <div class="card-body">
                <h5 class="card-title">What to do?</h5>
                <p class="card-text" align="left">Add events, tours, or dinner reservations.</p>
                <a onclick="window.location='/addEvents'+window.location.search;"> 
                <button class="btn btn-outline-primary btn-lg btn-block" type="button">Add Events +</button>
                </a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
